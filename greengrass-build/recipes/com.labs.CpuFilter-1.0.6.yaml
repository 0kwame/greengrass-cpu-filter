RecipeFormatVersion: '2020-01-25'
ComponentName: com.labs.CpuFilter
ComponentVersion: 1.0.6
ComponentDescription: Greengrass Core component that filters CPU metrics from IoT
  devices.
ComponentPublisher: 0kwame
ComponentConfiguration:
  DefaultConfiguration:
    Period: 0.5
    accessControl:
      aws.greengrass.ipc.mqttproxy:
        com.labs.HelloWorld:pubsub:1:
          policyDescription: Publish and subscribe to any topic
          operations:
          - aws.greengrass#PublishToIoTCore
          - aws.greengrass#SubscribeToIoTCore
          resources:
          - '*'
Manifests:
- Platform:
    os: all
  Artifacts:
  - URI: s3://greengrass-components-eu-central-1-382828593864/com.labs.CpuFilter/1.0.6/greengrass-cpu-filter.zip
    Unarchive: ZIP
  Lifecycle:
    Install:
      Script: 'python3 -m pip install virtualenv

        python3 -m virtualenv .venv

        . .venv/bin/activate

        python3 -m pip install -r {artifacts:decompressedPath}/greengrass-cpu-filter/requirements.txt

        '
      RequiresPrivilege: true
    Run:
      Script: '. .venv/bin/activate

        python3 {artifacts:decompressedPath}/greengrass-cpu-filter/src/main.py

        '
